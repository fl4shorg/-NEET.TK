<html lang="pt-BR">        
<head>        
    <meta charset="UTF-8">        
    <meta name="viewport" content="width=device-width, initial-scale=1.0">        
    <title>Cargos</title>        
    <script src="https://cdn.tailwindcss.com"></script>        
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">        
    <style>        
        .dark-mode {        
            background-color: #2d2d2d;        
            color: #f5f5f5;        
        }        
        .dark-mode .bg-purple-600 {        
            background-color: #6b3f90;        
        }        
        .dark-mode .bg-white {        
            background-color: #444;        
        }        
        .dark-mode .text-gray-500 {        
            color: #d1d1d1;        
        }        
        .dark-mode .text-purple-600 {        
            color: #a1a1f5;        
        }        
        .dark-mode .logo {        
            filter: invert(1);        
        }        
        /* Aumentando o tamanho do botão do modo escuro e do ícone dentro dele */      
        #dark-mode-toggle i {      
            font-size: 24px; /* Aumente o valor conforme necessário */      
        }      
        /* Adicionando a borda branca e fina na logo */      
        .logo-container img {      
            margin: 0 15px; /* Adiciona a margem desejada */      
            border: 2px solid white; /* Borda branca fina */      
            border-radius: 50%; /* Mantém a forma arredondada */      
        }      
        /* Ajustando a posição e o alinhamento do ícone e do cargo */      
        .navbar-center {      
            display: flex;      
            justify-content: center;      
            align-items: center;      
        }      
        /* Mudar fundo do card para preto no modo escuro */
        .dark-mode .bg-white {
            background-color: #333;
        }
        /* Estilo do rodapé */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #333;
            color: white;
            text-align: center;
            padding: 20px 0;
            font-size: 20px;
            font-weight: bold;
            z-index: 1000;
        }
        /* Garantir que os cards não sejam cobertos pelo rodapé */
        .content {
            padding-bottom: 80px; /* Ajuste conforme necessário */
        }
    </style>        
</head>        
<body class="bg-gray-100">        
    <!-- Navbar Fixa -->        
    <nav class="bg-purple-600 p-6 shadow-lg">        
        <div class="max-w-7xl mx-auto flex justify-between items-center">        
            <!-- Logo ou outros elementos à esquerda, se necessário -->        
            <div class="flex items-center logo-container">        
                <img src="https://i.imgur.com/nTqoKxv.png" alt="Logo" class="w-12 h-12 rounded-full">        
            </div>        
            <!-- Centralizando "Cargos" e Ícone -->        
            <div class="navbar-center space-x-4">        
                <i class="fas fa-briefcase text-4xl text-white"></i>  <!-- Ícone de briefcase -->        
                <span class="text-white text-3xl font-extrabold">Cargos</span>        
            </div>        
            <!-- Elementos à direita -->        
            <button id="dark-mode-toggle" class="text-white flex items-center space-x-2">        
                <i class="fas fa-moon" id="dark-mode-icon"></i> <!-- Ícone de Lua para o Modo Escuro -->        
            </button>        
        </div>        
    </nav>        
    <!-- Barra de Pesquisa -->        
    <div class="bg-white p-4 shadow-md">        
        <div class="max-w-7xl mx-auto">        
            <div class="relative">        
                <input type="text" id="search-input" placeholder="Buscar cargos..." class="w-full py-3 pl-10 pr-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600" oninput="filterCards()" />        
                <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"></i>        
            </div>        
        </div>        
    </div>        
    <!-- Cards Container -->        
    <div id="cards-container" class="space-y-4 p-6 content"></div>        
    <!-- Confirmação de Cópia -->        
    <div id="sewelart2" class="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg hidden">        
        Tag copiada com sucesso!        
    </div>        

    <!-- Rodapé fixo -->
    <div class="footer">
        © NEEXT LTDA 2019 TODOS OS DIREITOS RESERVADOS
    </div>

    <script>        
let allCards = [];      // Função de alternância do modo escuro  
function toggleDarkMode() {  
const body = document.body;  
const icon = document.getElementById('dark-mode-icon');  
body.classList.toggle('dark-mode');  // Alterna o ícone entre Lua e Sol
if (body.classList.contains('dark-mode')) {
icon.classList.remove('fa-moon');
icon.classList.add('fa-sun');
localStorage.setItem('dark-mode', 'enabled');  // Salva o estado no localStorage
} else {
icon.classList.remove('fa-sun');
icon.classList.add('fa-moon');
localStorage.setItem('dark-mode', 'disabled');  // Salva o estado no localStorage
}

}

// Verifica o estado do modo escuro ao carregar a página
window.onload = () => {
if (localStorage.getItem('dark-mode') === 'enabled') {
document.body.classList.add('dark-mode');
document.getElementById('dark-mode-icon').classList.remove('fa-moon');
document.getElementById('dark-mode-icon').classList.add('fa-sun');
} else {
document.body.classList.remove('dark-mode');
document.getElementById('dark-mode-icon').classList.remove('fa-sun');
document.getElementById('dark-mode-icon').classList.add('fa-moon');
}
};

// Evento para alternar o modo escuro
document.getElementById('dark-mode-toggle').addEventListener('click', toggleDarkMode);

async function fetchData() {
const url = 'https://script.google.com/macros/s/AKfycbwt1ry_dhiJv6G1cjOY0EKz6h8liBjc_RsaGOuXC0oQTGR_JMQNKv1E6xpjIW7-9AvxQg/exec?action=read';
const response = await fetch(url);
const data = await response.text();
const rows = data.split('\n').slice(1);

const categories = {};

rows.forEach(row => {
const columns = row.split(',');
const id = columns[0]?.trim();
const categoria = columns[1]?.trim();
const cargo = columns[2]?.trim();
const tag = columns[3]?.trim();

if (id && categoria && cargo) {        
    if (!categories[categoria]) {        
        categories[categoria] = [];        
    }        
    categories[categoria].push({ id, cargo, tag });        
}

});

for (const [categoria, cargos] of Object.entries(categories)) {
let categoryHTML =     `<div class="bg-white rounded-lg shadow-lg w-full max-w-sm">          <div class="bg-purple-600 text-white text-center py-2 rounded-t-lg">          <div class="flex items-center justify-center space-x-3">          <span class="text-xl"><i class="fas fa-database"></i></span>     <!-- Substituído o ícone para "database" -->     <h1 class="text-lg font-bold">${categoria}</h1>          </div>          <div class="text-sm text-gray-300">Total de Cargos: ${cargos.length}</div>          </div>          <div class="p-4">        `;

cargos.forEach((cargoData, index) => {        
    const cardHTML = `        
        <div class="flex items-center mb-4 card" data-id="${cargoData.id}" data-categoria="${categoria.toLowerCase()}" data-cargo="${cargoData.cargo.toLowerCase()}" data-tag="${cargoData.tag.toLowerCase()}">        
            <span class="text-gray-500 text-sm mr-4">${index + 1}</span>        
            <div class="flex items-center">        
                <div class="w-2 h-8 bg-purple-600 rounded-full mr-2"></div>        
            </div>        
            <div class="flex-1">        
                <span class="font-bold text-lg">${cargoData.cargo}</span>        
            </div>        
            <div class="flex items-center space-x-4">        
                <button class="text-purple-600 bg-white border border-purple-600 rounded-lg px-4 py-1 cursor-pointer copy-btn" data-tag="${cargoData.tag}">        
                    <i class="fas fa-tags"></i> <!-- Ícone de TAG -->        
                </button>        
            </div>        
        </div>        
    `;        
    categoryHTML += cardHTML;        
});        

categoryHTML += `</div></div>`;        
document.getElementById('cards-container').insertAdjacentHTML('beforeend', categoryHTML);

}

allCards = document.querySelectorAll('.card');

document.querySelectorAll('.copy-btn').forEach(button => {
button.addEventListener('click', function() {
const tag = this.getAttribute('data-tag');
copyTag(tag);
});
});

}

function filterCards() {
const searchTerm = document.getElementById('search-input').value.toLowerCase();
let visibleCards = false;

allCards.forEach(card => {
const categoria = card.getAttribute('data-categoria').toLowerCase();
const cargo = card.getAttribute('data-cargo').toLowerCase();
const tag = card.getAttribute('data-tag').toLowerCase();
const id = card.getAttribute('data-id').toLowerCase();

if (categoria.includes(searchTerm) || cargo.includes(searchTerm) || tag.includes(searchTerm) || id.includes(searchTerm)) {        
    card.style.display = 'flex';        
    visibleCards = true;        
} else {        
    card.style.display = 'none';        
}

});

if (!visibleCards) {
alert('Nenhum cargo encontrado para a pesquisa!');
}

}

function copyTag(tag) {
if (tag) {
navigator.clipboard.writeText(tag)
.then(() => {
const confirmationElement = document.getElementById('sewelart2');
confirmationElement.classList.remove('hidden');
setTimeout(() => { confirmationElement.classList.add('hidden'); }, 2000);
})
.catch(err => { console.error('Erro ao copiar: ', err); });
} else {
alert('Não há tag para copiar.');
}
}

fetchData();
</script>

</body>    
</html>