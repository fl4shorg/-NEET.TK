<!DOCTYPE html><html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regras da Neext</title>
    <link rel="icon" href="https://i.imgur.com/nTqoKxv.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        .dark-mode {
            background-color: #2d2d2d;
            color: #f5f5f5;
        }
        .dark-mode .bg-purple-600 {
            background-color: #6b3f90;
        }
        .dark-mode .bg-white {
            background-color: #444;
        }
        .dark-mode .text-gray-700, 
        .dark-mode .text-gray-600 {
            color: #d1d1d1;
        }
        .dark-mode .text-white {
            color: #fff;
        }
        .dark-mode .logo {
            filter: invert(1);
        }
        #dark-mode-toggle i {
            font-size: 24px;
        }
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        #cards-container {
            flex: 1;
        }
        .card-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 8px 16px;
            text-align: center;
            font-size: 1rem;
        }
        .card-header h1 {
            font-size: 1rem;
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: normal;
            line-height: 1.4;
            margin: 0;
        }
        p {
            margin-bottom: 1rem;
        }
        ul li {
            margin-bottom: 1rem;
        }
        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }
        .popup-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            max-width: 80%;
            max-height: 80%;
            overflow-y: scroll;
            width: 90%;
        }
        .popup img {
            width: 100%;
            max-width: 200px;
            margin: 10px;
            display: block;
        }
        .popup .popup-buttons {
            text-align: center;
            margin-top: 20px;
        }
        .popup .popup-buttons button {
            margin: 5px;
        }
        .search-bar {
            margin-top: 16px;
            margin-bottom: 16px;
            text-align: center;
        }
        .copied {
            animation: bounce 0.5s ease-in-out;
        }
        @keyframes bounce {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gray-100">
    <nav class="bg-purple-600 p-6 shadow-lg">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center">
                <img src="https://i.imgur.com/nTqoKxv.png" alt="Logo" class="w-12 h-12 rounded-full">
            </div>
            <div class="navbar-center space-x-4 flex items-center">
                <i class="fas fa-gavel text-4xl text-white"></i>
                <span class="text-white text-3xl font-extrabold">Regras</span>
            </div>
            <button id="dark-mode-toggle" class="text-white flex items-center space-x-2">
                <i class="fas fa-moon" id="dark-mode-icon"></i>
            </button>
        </div>
    </nav>

    <div class="search-bar">
        <input type="text" id="search-input" class="p-2 rounded-md border border-gray-300" placeholder="Pesquisar por nome, descrição ou parágrafo" oninput="filtrarRegras()">
    </div>

    <div id="cards-container" class="space-y-4 p-6"></div>  

    <div id="image-popup" class="popup">
        <div class="popup-content">
            <div id="image-list" class="grid grid-cols-4 gap-4"></div>
        </div>
    </div>

    <footer class="bg-gray-800 text-white py-4 mt-8">
        <div class="max-w-7xl mx-auto text-center">
            <p>&copy; NEEXT LTDA 2019 - Todos os direitos reservados</p>
        </div>
    </footer>

    <script>
        function toggleDarkMode() {
            const body = document.body;
            const icon = document.getElementById('dark-mode-icon');
            body.classList.toggle('dark-mode');
            if (body.classList.contains('dark-mode')) {
                icon.classList.replace('fa-moon', 'fa-sun');
                localStorage.setItem('dark-mode', 'enabled');
            } else {
                icon.classList.replace('fa-sun', 'fa-moon');
                localStorage.setItem('dark-mode', 'disabled');
            }
        }

        window.onload = () => {
            if (localStorage.getItem('dark-mode') === 'enabled') {
                document.body.classList.add('dark-mode');
                document.getElementById('dark-mode-icon').classList.replace('fa-moon', 'fa-sun');
            }
        };

        document.getElementById('dark-mode-toggle').addEventListener('click', toggleDarkMode);

        async function carregarRegras() {
            const url = "https://script.google.com/macros/s/AKfycbwydyV_ZNXM124qgdAk9MAcxeUayiMox5xVLNUW2bz8PVbP86RbUHKmWyyWeD17ZaA8/exec?action=read";
            try {
                const response = await fetch(url);
                const text = await response.text();
                const linhas = text.trim().split("\n").slice(1);
                let container = document.getElementById("cards-container");
                container.innerHTML = "";
                linhas.forEach((linha, index) => {
                    let [id, titulo, descricao, p1, p2, p3, p4] = linha.split(", ");
                    descricao = descricao.replace(/\|/g, ",");
                    p1 = p1 ? p1.replace(/\|/g, ",") : "";
                    p2 = p2 ? p2.replace(/\|/g, ",") : "";
                    p3 = p3 ? p3.replace(/\|/g, ",") : "";
                    p4 = p4 ? p4.replace(/\|/g, ",") : "";
                    let regraHTML = `
                        <div class="bg-white rounded-lg shadow-lg w-full max-w-sm" data-titulo="${titulo}" data-descricao="${descricao}" data-paragrafos="${p1} ${p2} ${p3} ${p4}">
                            <div class="card-header bg-purple-600 text-white rounded-t-lg">
                                <i class="fas fa-balance-scale text-xl"></i>
                                <h1 class="text-lg font-bold">${titulo}</h1>
                            </div>
                            <div class="p-4">
                                <p class="text-gray-700 text-sm"><i class="fas fa-info-circle"></i> ${descricao}</p>
                                <ul class="text-gray-600 mt-2 text-sm list-inside">
                                    ${p1 ? `<li><i class="fas fa-paragraph"></i> <strong>Parágrafo ${String(index + 1).padStart(2, '0')}:</strong> ${p1}</li>` : ''}
                                    ${p2 ? `<li><i class="fas fa-paragraph"></i> <strong>Parágrafo ${String(index + 2).padStart(2, '0')}:</strong> ${p2}</li>` : ''}
                                    ${p3 ? `<li><i class="fas fa-paragraph"></i> <strong>Parágrafo ${String(index + 3).padStart(2, '0')}:</strong> ${p3}</li>` : ''}
                                    ${p4 ? `<li><i class="fas fa-paragraph"></i> <strong>Parágrafo ${String(index + 4).padStart(2, '0')}:</strong> ${p4}</li>` : ''}
                                </ul>
                                <div class="mt-4 flex space-x-4">
                                    <button class="bg-blue-500 text-white px-4 py-2 rounded" onclick="copyCard(${index})"><i class="fas fa-copy"></i></button>
                                    <button class="bg-yellow-500 text-white px-4 py-2 rounded" onclick="showCardPopup(${index})"><i class="fas fa-images"></i></button>
                                </div>
                            </div>
                        </div>
                    `;
                    container.insertAdjacentHTML("beforeend", regraHTML);
                });
            } catch (error) {
                console.error("Erro ao carregar as regras:", error);
            }
        }

        function filtrarRegras() {
            const input = document.getElementById('search-input');
            const filter = input.value.toLowerCase();
            const cards = document.querySelectorAll('#cards-container .bg-white');
            cards.forEach(card => {
                const titulo = card.getAttribute('data-titulo').toLowerCase();
                const descricao = card.getAttribute('data-descricao').toLowerCase();
                const paragrafos = card.getAttribute('data-paragrafos').toLowerCase();
                if (titulo.includes(filter) || descricao.includes(filter) || paragrafos.includes(filter)) {
                    card.style.display = "";
                } else {
                    card.style.display = "none";
                }
            });
        }

        function copyCard(index) {
            const card = document.querySelector(`#cards-container .bg-white:nth-child(${index + 1})`);
            const content = card.querySelector('.text-sm').textContent;
            navigator.clipboard.writeText(content).then(() => {
                const button = card.querySelector('button');
                button.classList.add('copied');
                alert("Conteúdo copiado com sucesso!");
                setTimeout(() => {
                    button.classList.remove('copied');
                }, 500);
            }).catch((error) => {
                console.error('Erro ao copiar para a área de transferência:', error);
            });
        }

        carregarRegras();
    </script>
</body>
</html>