<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ùóóùóîùó¶ùóõùóóùóïùó¢ùóîùó•ùóó</title>
    <meta name="description" content=" Painel ">
<link rel="icon" href="https://www.exemplo.com/caminho/para/o/icone.jpg" type="image/jpg">
<link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
  <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f5f5f5; }
        h1, h2 { text-align: center; color: #333; }
        .navbar { display: flex; justify-content: center; align-items: center; background-color: #007BFF; padding: 20px 0; color: #fff; }
        .navbar-brand { font-size: 28px; color: #fff; text-decoration: none; display: flex; align-items: center; gap: 10px; }
        .navbar-brand i { font-size: 30px; }
        .navbar-menu { list-style-type: none; display: flex; gap: 20px; margin: 0; padding: 0; }
        .navbar-menu li a { color: #fff; text-decoration: none; font-size: 18px; transition: color 0.3s ease; }
        .navbar-menu li a:hover { color: #f8d7da; }
        @media (max-width: 768px) { .navbar-menu { flex-direction: column; align-items: flex-start; gap: 10px; } }
        #users-cards { margin: 10px auto; padding: 10px; max-width: 500px; background: #fff; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); }
        .user-card { border: 1px solid #ccc; padding: 15px; margin-bottom: 10px; border-radius: 5px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); background: #fff; }
        .actions { margin-top: 10px; display: flex; justify-content: space-between; }
        @media (max-width: 600px) { #users-cards { padding: 15px; margin: 10px; } }
        button { background-color: #007BFF; color: #fff; padding: 10px 15px; font-size: 16px; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        
        
    .swal2-popup {
        width: 400px !important; /* Define a largura do pop-up */
        font-size: 16px; /* Define o tamanho da fonte */
    }

    .swal2-title {
        font-size: 20px; /* Tamanho do t√≠tulo */
    }

    .swal2-content {
        font-size: 14px; /* Tamanho do conte√∫do */
    }
    
    /* Estilos para o modo escuro */
body.dark-mode {
    background-color: #121212;
    color: #fff;
}

body.dark-mode .navbar {
    background-color: #333;
}

body.dark-mode .navbar-menu li a {
    color: #fff;
}

body.dark-mode #users-cards,
body.dark-mode .user-card {
    background-color: #333;
    color: #fff;
    border-color: #555;
}

body.dark-mode button {
    background-color: #444;
    color: #fff;
}

body.dark-mode button:hover {
    background-color: #666;
}

body.dark-mode .swal2-popup {
    background-color: #333 !important;
    color: #fff !important;
}


    body { 
        font-family: Arial, sans-serif; 
        background-color: #f5f5f5; 
        color: #333;
        transition: background-color 0.3s, color 0.3s;
    }
    body.dark-mode {
        background-color: #121212;
        color: #fff;
    }
    .navbar { 
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        background-color: #007BFF; 
        padding: 20px; 
    }
    .navbar a { 
        color: #fff; 
        text-decoration: none; 
        font-size: 18px; 
    }
    .toggle-btn {
        cursor: pointer;
        font-size: 20px;
        color: #fff;
        background: none;
        border: none;
    }


    </style>
</head>
<body>
    <!-- Navbar -->
<!-- Navbar com op√ß√£o de Modo Escuro -->



<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

<!-- Inclus√£o do SweetAlert2 (CSS e JS) -->
<link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.9/dist/sweetalert2.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.9/dist/sweetalert2.min.js"></script>

<div class="navbar" style="background: linear-gradient(90deg, #2575fc, #ff4081); padding: 20px; color: white; font-size: 36px; font-weight: bold;">
    <div class="navbar-brand" style="display: flex; align-items: center; gap: 12px;">
        <img src="svg/navbar.svg" alt="Navbar Icon" style="width: 1.5em; height: 1.5em; display: inline-block; vertical-align: middle;"> 
        DASHBOARD
    </div>
    <button id="darkModeToggle" onclick="toggleDarkMode()" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer;">
        <i id="icon" class="fas fa-moon moon-icon"></i> <!-- √çcone inicial de lua para o modo escuro -->
    </button>
    <div style="display: flex; align-items: center; gap: 10px;">
        <div id="profileWrapper" style="position: relative; width: 50px; height: 50px; cursor: pointer; display: flex; align-items: center; justify-content: center; border-radius: 50%; background-color: #ccc;">
            <i class="fas fa-user" id="defaultIcon" style="font-size: 24px; color: white;"></i>
            <img id="profilePic" src="" alt="Profile" style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover; display: none;">
        </div>
        <input type="file" id="profileInput" style="display: none;" accept="image/*" onchange="changeProfilePic()">
    </div>
    <!-- Bot√£o de sair com √≠cone de sair -->
    <button onclick="confirmExit()" style="background: none; border: none; color: white; font-size: 18px; cursor: pointer; padding: 5px; margin-left: 10px; display: flex; align-items: center;">
        <i class="fas fa-sign-out-alt" style="font-size: 20px;"></i> <!-- √çcone de sair -->
    </button>
</div>

<!-- Estilos para o efeito de corte -->
<style>
    /* Anima√ß√£o de corte do √≠cone */
    @keyframes cutEffect {
        0% {
            transform: rotate(0deg);
            clip-path: inset(0 0 0 0);
        }
        50% {
            transform: rotate(180deg);
            clip-path: inset(0 50% 0 50%); /* Divide o √≠cone */
        }
        100% {
            transform: rotate(360deg);
            clip-path: inset(0 0 0 0); /* Volta ao normal */
        }
    }

    /* Aplica o efeito de corte ao √≠cone da lua */
    .moon-icon.cut {
        animation: cutEffect 0.5s ease-in-out;
    }

    /* Estilo para o √≠cone do sol */
    .fa-sun {
        font-size: 20px;
    }
</style>

<script>
    // Fun√ß√£o para alternar entre modo escuro e claro
    function toggleDarkMode() {
        const body = document.body;
        const icon = document.getElementById("icon");

        // Alterna a classe 'dark-mode' no corpo da p√°gina
        body.classList.toggle("dark-mode");

        // Alterna o √≠cone entre lua e sol
        if (body.classList.contains("dark-mode")) {
            icon.classList.remove("fa-moon");
            icon.classList.add("fa-sun");

            // Salva no localStorage
            localStorage.setItem('darkMode', 'enabled');
            console.log("Modo escuro ativado e salvo no localStorage.");
        } else {
            icon.classList.remove("fa-sun");
            icon.classList.add("fa-moon");

            // Salva no localStorage
            localStorage.setItem('darkMode', 'disabled');
            console.log("Modo claro ativado e salvo no localStorage.");
        }
    }

    // Fun√ß√£o para carregar configura√ß√µes do localStorage e fotos de perfil
    window.onload = function() {
        console.log("P√°gina carregada. Verificando configura√ß√µes no localStorage.");

        // Carregar a foto de perfil do localStorage (se houver)
        const savedProfilePic = localStorage.getItem("profilePic");
        const profilePic = document.getElementById("profilePic");
        const defaultIcon = document.getElementById("defaultIcon");

        // Verificar se existe foto de perfil salva no localStorage
        if (savedProfilePic) {
            profilePic.src = savedProfilePic;
            profilePic.style.display = "block";
            defaultIcon.style.display = "none";
            console.log("Foto de perfil carregada do localStorage.");
        } else {
            console.log("Nenhuma foto de perfil encontrada no localStorage.");
        }

        // Verifica se o modo escuro est√° salvo no localStorage e aplica
        const darkModeStatus = localStorage.getItem('darkMode');
        if (darkModeStatus === 'enabled') {
            document.body.classList.add('dark-mode');
            document.getElementById("icon").classList.remove('fa-moon');
            document.getElementById("icon").classList.add('fa-sun');
            console.log("Modo escuro ativado.");
        } else if (darkModeStatus === 'disabled') {
            document.body.classList.remove('dark-mode');
            document.getElementById("icon").classList.remove('fa-sun');
            document.getElementById("icon").classList.add('fa-moon');
            console.log("Modo claro ativado.");
        } else {
            console.log("Modo escuro n√£o encontrado no localStorage.");
        }
    };

    // Fun√ß√£o para alterar a foto de perfil
    function changeProfilePic() {
        const fileInput = document.getElementById("profileInput");
        const profilePic = document.getElementById("profilePic");
        const defaultIcon = document.getElementById("defaultIcon");
        const file = fileInput.files[0];

        if (file) {
            const reader = new FileReader();
            reader.onloadend = function() {
                // Define a imagem carregada como foto de perfil
                profilePic.src = reader.result;
                profilePic.style.display = "block";
                defaultIcon.style.display = "none";

                // Salva a nova foto de perfil no localStorage
                localStorage.setItem("profilePic", reader.result);
                console.log("Foto de perfil salva no localStorage.");
            };
            reader.readAsDataURL(file);
        } else {
            console.log("Nenhum arquivo selecionado para foto de perfil.");
        }
    }

    // Quando clicar no perfil, abre o seletor de arquivos
    document.getElementById("profileWrapper").onclick = function() {
        document.getElementById("profileInput").click();
    };
</script>



<script>
    // Fun√ß√£o de Logout com confirma√ß√£o antes de sair utilizando SweetAlert2
    function confirmExit() {
        // Exibe o SweetAlert2 com a confirma√ß√£o
        Swal.fire({
            title: 'Voc√™ tem certeza?',
            text: "Voc√™ deseja encerrar a sess√£o?",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Sim',
            cancelButtonText: 'Cancelar',
            reverseButtons: true
        }).then((result) => {
            if (result.isConfirmed) {
                // Limpar as prefer√™ncias do modo escuro
                localStorage.removeItem('darkMode');
                console.log("Modo escuro removido do localStorage.");

                // Limpar a foto de perfil
                localStorage.removeItem('profilePic');
                console.log("Foto de perfil removida do localStorage.");

                // Redireciona para a p√°gina neext.ltda.com
                window.location.href = "https://neetk.onrender.com/login";  // Redireciona para a p√°gina de logout
                console.log("Redirecionando para neext.ltda.com ap√≥s logout.");
            } else {
                console.log("Logout cancelado.");
            }
        });
    }
</script>


<!-- Container para os cards -->
<div id="summary-cards" style="display: flex; flex-wrap: wrap; justify-content: space-between; gap: 10px; margin-top: 20px; padding: 0 10px;"></div>



<!-- Container para os gr√°ficos -->
<div style="display: flex; flex-direction: column; gap: 20px; margin-top: 20px; padding: 0 10px;">
    <div id="graph-container" style="width: 100%; height: 400px;">
        <canvas id="ctsChart"></canvas> <!-- Gr√°fico de Coluna -->
    </div>
    <div id="graph-pizza-container" style="width: 100%; height: 400px;">
        <canvas id="pizzaChart"></canvas> <!-- Gr√°fico de Pizza -->
    </div>
</div>

<!-- Link para Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
<!-- Link para o Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>




<script>
    const API_URL_2 = 'https://script.google.com/macros/s/AKfycbyeaSM8dqofVXd-QbyJoqUb4d9qTLX01zRXit-mHNmnmdpJay_iXbv1fl1Nfsh8Lxa82A/exec?action=summary';  // Substitua por sua URL

    function loadSummaryData() {
        fetch(API_URL_2)
            .then(response => response.json())
            .then(data => {
                const summaryCards = document.getElementById('summary-cards');
                
                // Checa se o card da situa√ß√£o j√° existe. Se n√£o, cria o card.
                let situationCard = document.getElementById('situation-card');
                if (!situationCard) {
                    situationCard = document.createElement('div');
                    situationCard.id = 'situation-card';  // Garantindo que o card de situa√ß√£o tenha um ID √∫nico
                    summaryCards.appendChild(situationCard);
                }

                // Atualizar a situa√ß√£o do grupo
                const totalAdmins = data["Total de Administradores"];
let groupStatus = '';
let statusColor = '';
let statusIcon = '';

if (totalAdmins <= 20) {
    groupStatus = 'Situa√ß√£o P√©ssima';
    statusColor = '#e74c3c'; // Vermelho
    statusIcon = 'fas fa-angry'; // √çcone de carinha zangada
} else if (totalAdmins <= 40) {
    groupStatus = 'Situa√ß√£o Muito Ruim';
    statusColor = '#e67e22'; // Laranja
    statusIcon = 'fas fa-frown'; // √çcone de carinha triste
} else if (totalAdmins <= 49) {
    groupStatus = 'Situa√ß√£o Est√°vel';
    statusColor = '#f1c40f'; // Amarelo
    statusIcon = 'fas fa-meh'; // √çcone de carinha neutra
} else if (totalAdmins === 50) {
    groupStatus = 'Situa√ß√£o Boa';
    statusColor = '#27ae60'; // Verde escuro
    statusIcon = 'fas fa-smile'; // √çcone de carinha feliz
} else if (totalAdmins <= 60) {
    groupStatus = 'Situa√ß√£o Muito Boa';
    statusColor = '#2ecc71'; // Verde
    statusIcon = 'fas fa-laugh'; // √çcone de carinha risonha
} else if (totalAdmins >= 70) {
    groupStatus = 'Situa√ß√£o Ultra Boa';
    statusColor = '#9b59b6'; // Roxo
    statusIcon = 'fas fa-grin-stars'; // √çcone de carinha animada
}

situationCard.innerHTML = `
    <div style="text-align: center;">
        <i class="${statusIcon}" style="font-size: 30px; color: #fff;"></i>
    </div>
    <h4 style="color: #fff; font-size: 14px; text-align: center;">Situa√ß√£o do Grupo</h4>
    <p style="color: #fff; font-size: 18px; font-weight: bold; text-align: center;">${groupStatus}</p>
`;
situationCard.style.backgroundColor = statusColor;
                situationCard.style.padding = '10px';
                situationCard.style.borderRadius = '8px';
                situationCard.style.flex = '1 1 calc(50% - 10px)';
                situationCard.style.boxSizing = 'border-box';

                // Atualizar os outros cards
                const cards = [
                    { title: "N√∫mero do Grupo", value: data["N√∫mero do Grupo"], color: "#3498db", icon: "fa-users" },
                    { title: "Total de Administradores", value: data["Total de Administradores"], color: "#e74c3c", icon: "fa-user-shield" },
                    { title: "Jovens", value: data["Faixa Et√°ria"].Jovens, color: "#2ecc71", icon: "fa-child" },
                    { title: "Adolescentes", value: data["Faixa Et√°ria"].Adolescentes, color: "#9b59b6", icon: "fa-user-graduate" },
                    { title: "Adultos", value: data["Faixa Et√°ria"].Adultos, color: "#f39c12", icon: "fa-user" },
                    { title: "√öltimo ID", value: data["√öltimo ID Enviado"], color: "#16a085", icon: "fa-id-card" },
                    { title: "Taxa de Crescimento", value: data["Taxa de Crescimento"], color: "#f1c40f", icon: "fa-chart-line" }
                ];

                // Remover e recriar os outros cards
                summaryCards.innerHTML = '';
                summaryCards.appendChild(situationCard);  // Re-add the situation card at the top
                cards.forEach(card => {
                    const cardElement = document.createElement('div');
                    cardElement.classList.add('card');
                    cardElement.style.backgroundColor = card.color;
                    cardElement.style.padding = '10px';
                    cardElement.style.borderRadius = '8px';
                    cardElement.style.flex = '1 1 calc(50% - 10px)';
                    cardElement.style.boxSizing = 'border-box';

                    cardElement.innerHTML = `
                        <div style="text-align: center;">
                            <i class="fas ${card.icon}" style="font-size: 30px; color: #fff;"></i>
                        </div>
                        <h4 style="color: #fff; font-size: 14px; text-align: center;">${card.title}</h4>
                        <p style="color: #fff; font-size: 18px; font-weight: bold; text-align: center;">${card.value}</p>
                    `;
                    summaryCards.appendChild(cardElement);
                });

                // C√°lculo da Pontua√ß√£o de CTS
                const growthRate = parseFloat(data["Taxa de Crescimento"].replace('%', '').trim()) / 100;
                const ctsScore = (totalAdmins + growthRate * 100) / 10;  // Calculando a pontua√ß√£o
                const finalScore = Math.min(Math.max(ctsScore, 0), 10);

                // Criando o gr√°fico de barras (Coluna)
                const ctxBar = document.getElementById('ctsChart').getContext('2d'); // Obtendo o contexto do canvas
                new Chart(ctxBar, {
                    type: 'bar',
                    data: {
                        labels: ['Pontua√ß√£o de CTS'],
                        datasets: [{
                            label: 'Pontua√ß√£o',
                            data: [finalScore],
                            backgroundColor: '#3498db',
                            borderColor: '#2980b9',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                min: 0,
                                max: 10,
                                ticks: {
                                    stepSize: 1
                                }
                            }
                        }
                    }
                });

// Gr√°fico de Pizza para Total de Administradores (50 como meta)
const remainingAdmins = Math.max(0, 50 - totalAdmins); // Garante que n√£o fique negativo
const ctxPizza = document.getElementById('pizzaChart').getContext('2d');
const pizzaData = {
    labels: ['Admins atingidos', 'Faltando Administradores'],
    datasets: [{
        data: [totalAdmins, remainingAdmins],
        backgroundColor: ['#2ecc71', '#e74c3c'],
        borderColor: ['#27ae60', '#c0392b'],
        borderWidth: 1
    }]
};

new Chart(ctxPizza, {
    type: 'doughnut',
    data: pizzaData,
    options: {
        responsive: true,
        plugins: {
            tooltip: {
                callbacks: {
                    label: function(tooltipItem) {
                        return tooltipItem.label + ': ' + tooltipItem.raw + ' Administradores';
                    }
                }
            }
        }
    }
});
            })
            .catch(error => {
                console.error("Erro ao carregar os dados:", error);
            });
    }

    // Altera√ß√£o do evento de carregamento para 'DOMContentLoaded'
    document.addEventListener('DOMContentLoaded', loadSummaryData);

    // Atualiza os dados a cada 30 segundos (30000ms)
    setInterval(loadSummaryData, 30000);
</script>




    <!-- Container para os Cards dos Usu√°rios -->
    
<!-- Cont√™iner com a pesquisa e os bot√µes -->
<div id="search-container" style="text-align: center; margin: 20px;">
    <!-- Linha de Pesquisa -->
    <div style="display: flex; justify-content: center; align-items: center; margin-bottom: 10px;">
        <!-- Caixa de texto com visual moderno -->
        <input type="text" id="search-input" placeholder="Pesquisar pelo ID"
               style="padding: 12px 20px; font-size: 16px; width: 350px; border: 2px solid #ddd; 
                      border-radius: 25px; background-color: #fff; 
                      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
                      transition: all 0.3s ease;">
        
        <!-- Bot√£o de pesquisa roxo -->
        <button onclick="searchUsers()" 
                style="background-color: #9b59b6; color: white; padding: 12px 20px; 
                       border: none; cursor: pointer; border-radius: 50%; 
                       margin-left: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
                       transition: box-shadow 0.3s ease, transform 0.2s ease;">
            <i class="fas fa-search"></i> 
        </button>
    </div>
    
    <!-- Barra de Carregamento -->
    <div id="loading-container" style="display: none; width: 100%; height: 5px; background-color: #ddd; border-radius: 5px; margin-top: 20px;">
        <div id="loading-bar" style="width: 0%; height: 100%; background-color: #9b59b6; border-radius: 5px;"></div>
    </div>
    
    <div id="loading-text" style="font-size: 16px; color: #9b59b6; display: none;">Pesquisando<span id="dots">...</span></div>
    
    <!-- Resultados da pesquisa -->
    <div id="search-results" style="margin-top: 20px; font-size: 18px; color: #333;"></div>
</div>

<script>
    function searchUsers() {
        // Exibe a barra de carregamento
        document.getElementById("loading-container").style.display = "block";
        document.getElementById("loading-text").style.display = "inline"; 
        
        // Simula√ß√£o de carregamento da barra
        let progressBar = document.getElementById("loading-bar");
        let width = 0;
        let interval = setInterval(function() {
            if (width >= 100) {
                clearInterval(interval);
            } else {
                width++;
                progressBar.style.width = width + "%";
            }
        }, 20); // A barra de carregamento vai preenchendo a cada 20ms
        
        // Simula√ß√£o de uma pesquisa mais r√°pida
        setTimeout(function() {
            clearInterval(interval); // Para a anima√ß√£o de barra
            document.getElementById("loading-text").style.display = "none"; // Esconde a mensagem
            document.getElementById("loading-container").style.display = "none"; // Esconde a barra de carregamento
            
            // Exibe os resultados imediatamente ap√≥s a "pesquisa"
            let resultsDiv = document.getElementById("search-results");
            resultsDiv.innerHTML = "Resultado encontrado: ID 123, Nome de exemplo";
        }, 2000); // Pesquisa simulada com dura√ß√£o de 2 segundos
    }
</script>
<!-- Bot√£o de Verificar Lista Negra -->
<!-- Bot√£o de Verificar Lista Negra -->
<button onclick="openPopup()" style="background: linear-gradient(to right, #ff4d4d, #ff0000); color: white; padding: 10px 15px; border: none; cursor: pointer; border-radius: 5px; display: block; margin: 0 auto; font-size: 16px; font-weight: bold; display: flex; align-items: center;">
  <img src="svg/button2.svg" alt="√çcone Navbar" width="20" height="20" style="margin-right: 10px;">
  Verificar Lista Negra
</button>

<!-- Bot√£o de Cadastro com √çcone -->
<button id="registerButton" style="background: linear-gradient(to right, #ff007f, #8a2be2); color: white; padding: 10px 15px; border: none; cursor: pointer; border-radius: 5px; display: block; margin: 20px auto; font-size: 16px; font-weight: bold; display: flex; align-items: center;">
    <!-- √çcone do Cadastro -->
    <img src="svg/Button.svg" alt="√çcone de Cadastro" style="width: 25px; height: 25px; margin-right: 10px;">
    Cadastrar Novo Adm
</button>

    
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>

<script>
  // Fun√ß√£o para abrir o popup
  function openPopup() {
    document.getElementById('popup').style.display = 'flex';
  }

  // Fun√ß√£o para fechar o popup
  function closePopup() {
    document.getElementById('popup').style.display = 'none';
  }

  // Fun√ß√£o para verificar se o n√∫mero est√° na lista negra
  async function checkNumber() {
    const number = document.getElementById('searchInput').value.trim();
    
    // Verifica se o n√∫mero digitado est√° vazio
    if (number === "") {
      Swal.fire({
        icon: 'warning',
        title: 'Aten√ß√£o',
        text: 'Digite um n√∫mero para pesquisa!',
      });
      return;
    }

    try {
      // Fazendo a requisi√ß√£o √† API com o n√∫mero digitado
      const response = await fetch(`https://script.google.com/macros/s/AKfycbxIG53Hskr69iwx5OREGTqEHYkBCIQYwZr820x2gU7AJ2Fvd2b82iOszZMU0nQ5hQ/exec`);

      // Verificando se a resposta da API √© v√°lida
      if (!response.ok) {
        throw new Error('Erro ao carregar os n√∫meros.');
      }

      // Obtendo a resposta como texto, pois n√£o √© um JSON
      const data = await response.text();

      // Express√£o regular para encontrar todos os n√∫meros
      const regex = /\d{11,}/g;  // Captura n√∫meros com 11 ou mais d√≠gitos
      const numbers = data.match(regex);

      if (numbers && numbers.includes(number)) {
        // N√∫mero encontrado na lista
        Swal.fire({
          icon: 'success',
          title: 'N√∫mero Encontrado',
          text: `O n√∫mero ${number} est√° na lista negra!`,
        });
      } else {
        // N√∫mero n√£o encontrado na lista
        Swal.fire({
          icon: 'error',
          title: 'N√∫mero N√£o Encontrado',
          text: `O n√∫mero ${number} n√£o foi encontrado na lista negra.`,
        });
      }
    } catch (error) {
      // Exibindo mensagem de erro em caso de falha
      Swal.fire({
        icon: 'error',
        title: 'Erro',
        text: error.message,
      });
    }
  }
</script>



<!-- Popup -->
<div id="popup" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center;">
  <div style="background: #fff; padding: 20px; border-radius: 5px; text-align: center; width: 80%; max-height: 80%; overflow-y: auto;">
    <h3>Verificar N√∫mero na Lista Negra</h3>
    <input type="text" id="searchInput" placeholder="Digite o n√∫mero" style="width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px;">
    
    <!-- Bot√£o para verificar o n√∫mero -->
    <button onclick="checkNumber()" style="padding: 10px 20px; margin-top: 10px;">Verificar</button>
    
    <button onclick="closePopup()" style="margin-top: 10px;">Fechar</button>
  </div>
</div>
    <div id="users-cards"></div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        const API_URL = 'https://script.google.com/macros/s/AKfycbyeaSM8dqofVXd-QbyJoqUb4d9qTLX01zRXit-mHNmnmdpJay_iXbv1fl1Nfsh8Lxa82A/exec';

// Fun√ß√£o para carregar os usu√°rios
// Fun√ß√£o de pesquisa
function searchUsers() {
    const searchQuery = document.getElementById('search-input').value.toLowerCase();  // Pega o texto da pesquisa e converte para min√∫sculas
    fetch(`${API_URL}?action=read`)
        .then(response => response.text())
        .then(data => {
            const cardsContainer = document.getElementById("users-cards");
            cardsContainer.innerHTML = "";  // Limpa os cards antes de exibir os resultados da pesquisa

            if (data.trim().length > 0) {
                // Se houver dados, divida e filtre com base no texto de pesquisa
                const filteredData = data.trim().split("\n").slice(1).filter(line => {
                    const user = line.split(",");
                    // Verifica se qualquer campo cont√©m o texto da pesquisa
                    return user.some(field => field.toLowerCase().includes(searchQuery));
                });

                if (filteredData.length > 0) {
                    // Se houver usu√°rios que atendem ao crit√©rio, exibe os cards
                    filteredData.forEach(line => {
                        const user = line.split(",");
                        const card = document.createElement("div");
                        card.classList.add("user-card");
                        card.innerHTML = `
                            <h3><i class="fas fa-user"></i> ${user[1]}</h3>
                            <p><strong><i class="fas fa-birthday-cake"></i> Idade:</strong> ${user[2]}</p>
                            <p><strong><i class="fas fa-phone-alt"></i> N√∫mero:</strong> ${user[3]}</p>
                            <p><strong><i class="fab fa-instagram"></i> Instagram:</strong> ${user[4]}</p>
                            <p><strong><i class="fas fa-envelope"></i> E-mail:</strong> ${user[5]}</p>
                            <p><strong><i class="fas fa-id-badge"></i> ID:</strong> ${user[0]}</p>
                            <div class="actions">
                                <button onclick="editUser('${user[0]}', '${user[1]}', ${user[2]}, '${user[3]}', '${user[4]}', '${user[5]}')" 
                                        style="background-color: #4CAF50; color: white; padding: 8px 12px; margin-right: 5px; border: none; cursor: pointer;">
                                    <i class="fas fa-edit"></i> Editar
                                </button>
                                <button onclick="deleteUser('${user[0]}')" 
                                        style="background-color: #f44336; color: white; padding: 8px 12px; border: none; cursor: pointer;">
                                    <i class="fas fa-trash-alt"></i> Excluir
                                </button>
                            </div>
                        `;
                        cardsContainer.appendChild(card);
                    });
                } else {
                    cardsContainer.innerHTML = "<p>Nenhum usu√°rio encontrado com essa pesquisa.</p>";
                }
            } else {
                cardsContainer.innerHTML = "<p>Nenhum usu√°rio encontrado.</p>";
            }
        })
        .catch(error => {
            console.error("Erro ao carregar dados:", error);
            const cardsContainer = document.getElementById("users-cards");
            cardsContainer.innerHTML = "<p>Erro ao carregar os usu√°rios. Tente novamente mais tarde.</p>";
        });
}

// Fun√ß√£o de carregar usu√°rios
function loadUsers() {
    fetch(`${API_URL}?action=read`)
        .then(response => response.text())
        .then(data => {
            const cardsContainer = document.getElementById("users-cards");
            cardsContainer.innerHTML = "";
            if (data.trim().length > 0) {
                data.trim().split("\n").slice(1).forEach(line => {
                    const user = line.split(",");
                    const card = document.createElement("div");
                    card.classList.add("user-card");
                    card.innerHTML = `
                        <h3><i class="fas fa-user"></i> ${user[1]}</h3>
                        <p><strong><i class="fas fa-birthday-cake"></i> Idade:</strong> ${user[2]}</p>
                        <p><strong><i class="fas fa-phone-alt"></i> N√∫mero:</strong> ${user[3]}</p>
                        <p><strong><i class="fab fa-instagram"></i> Instagram:</strong> ${user[4]}</p>
                        <p><strong><i class="fas fa-envelope"></i> E-mail:</strong> ${user[5]}</p>
                        <p><strong><i class="fas fa-id-badge"></i> ID:</strong> ${user[0]}</p>
                        <div class="actions">
                            <button onclick="editUser('${user[0]}', '${user[1]}', ${user[2]}, '${user[3]}', '${user[4]}', '${user[5]}')" 
                                    style="background-color: #4CAF50; color: white; padding: 8px 12px; margin-right: 5px; border: none; cursor: pointer;">
                                <i class="fas fa-edit"></i> Editar
                            </button>
                            <button onclick="deleteUser('${user[0]}')" 
                                    style="background-color: #f44336; color: white; padding: 8px 12px; border: none; cursor: pointer;">
                                <i class="fas fa-trash-alt"></i> Excluir
                            </button>
                        </div>
                    `;
                    cardsContainer.appendChild(card);
                });
            } else {
                cardsContainer.innerHTML = "<p>Nenhum usu√°rio encontrado.</p>";
            }
        })
        .catch(error => {
            console.error("Erro ao carregar dados:", error);
            const cardsContainer = document.getElementById("users-cards");
            cardsContainer.innerHTML = "<p>Erro ao carregar os usu√°rios. Tente novamente mais tarde.</p>";
        });
}

// Vincular a pesquisa ao evento de digita√ß√£o
document.getElementById('search-input').addEventListener('input', searchUsers);

// Carregar os usu√°rios inicialmente
loadUsers();

        // Fun√ß√£o para gerar ID sugerido
        function getSuggestedID() {
            fetch(`${API_URL}?action=read`)
                .then(response => response.text())
                .then(data => {
                    const lines = data.trim().split("\n");
                    const lastUser = lines[lines.length - 1];
                    const lastID = lastUser.split(",")[0];
                    const newID = parseInt(lastID) + 1;
                    document.getElementById('swal-id').value = newID;
                    document.getElementById('id-suggestion').innerText = `ID Dispon√≠vel: ${newID}`;
                })
                .catch(error => console.error('Erro ao gerar ID sugerido:', error));
        }

        // Exibir popup para cadastrar novo usu√°rio
document.getElementById("registerButton").addEventListener("click", function() {
    Swal.fire({
        title: 'Cadastrar Novo Adm',
        html: `
            <label for="swal-name"><i class="fas fa-id-badge"></i> Nome</label>
            <input id="swal-name" class="swal2-input" placeholder="Nome">
            
            <label for="swal-age"><i class="fas fa-birthday-cake"></i> Idade</label>
            <input id="swal-age" type="number" class="swal2-input" placeholder="Idade">
            
            <label for="swal-number"><i class="fas fa-phone-alt"></i> N√∫mero</label>
            <input id="swal-number" class="swal2-input" placeholder="N√∫mero">
            
            <label for="swal-instagram"><i class="fab fa-instagram"></i> Instagram</label>
            <input id="swal-instagram" class="swal2-input" placeholder="Instagram">
            
            <label for="swal-email"><i class="fas fa-envelope"></i> E-mail</label>
            <input id="swal-email" type="email" class="swal2-input" placeholder="E-mail">
            
            <p id="id-suggestion">Aguarde, ID Dispon√≠vel ...</p>
            
            <label for="swal-id"><i class="fas fa-hashtag"></i> ID</label>
            <input id="swal-id" type="text" class="swal2-input" placeholder="ID" disabled>
        `,
        showCancelButton: true,
        confirmButtonText: 'Cadastrar',
        preConfirm: () => {
            const name = document.getElementById('swal-name').value;
            const age = document.getElementById('swal-age').value;
            const number = document.getElementById('swal-number').value;
            const instagram = document.getElementById('swal-instagram').value;
            const email = document.getElementById('swal-email').value;
            const id = document.getElementById('swal-id').value;
            
            // Altera o bot√£o para mostrar as bolinhas enquanto carrega
            Swal.showLoading();

            // Enviar dados para a API
            return fetch(API_URL, {
                method: 'POST',
                body: new URLSearchParams({
                    action: 'create',
                    name, age, number, instagram, email, id
                })
            })
            .then(response => response.json())
            .then(data => {
                // Sempre exibe sucesso, sem verificar erro
                Swal.fire({
                    title: 'Sucesso!',
                    text: 'Administrador cadastrado com sucesso!',
                    icon: 'success',
                    confirmButtonText: 'Fechar'
                }).then(() => {
                    loadUsers(); // Carregar usu√°rios, se necess√°rio
                });
            })
            .catch(error => {
                console.error(error);
                // Exibe a mensagem de sucesso, mesmo se ocorrer erro
                Swal.fire({
                    title: 'Sucesso!',
                    text: 'Administrador cadastrado com sucesso!',
                    icon: 'success',
                    confirmButtonText: 'Fechar'
                });
            });
        },
        customClass: {
            popup: 'custom-popup'
        },
        didOpen: () => {
            // Impede o movimento da p√°gina durante o preenchimento do formul√°rio
            document.querySelector('.swal2-popup').style.overflow = 'hidden';
        }
    });

    // Obter o ID sugerido
    getSuggestedID();
});

        // Fun√ß√µes para editar e excluir usu√°rios
function editUser(id, name, age, number, instagram, email) {
    Swal.fire({
        title: 'Editar Usu√°rio',
        html: `
            <div style="display: flex; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">
                <i class="fas fa-user" style="margin-right: 5px; font-size: 20px;"></i>
                <label for="swal-name" style="font-size: 14px; margin-right: 10px; width: 25%;">Nome</label>
                <input id="swal-name" class="swal2-input" value="${name}" style="flex-grow: 1; font-size: 14px; padding: 8px; width: 60%;">
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">
                <i class="fas fa-birthday-cake" style="margin-right: 5px; font-size: 20px;"></i>
                <label for="swal-age" style="font-size: 14px; margin-right: 10px; width: 25%;">Idade</label>
                <input id="swal-age" type="number" class="swal2-input" value="${age}" style="flex-grow: 1; font-size: 14px; padding: 8px; width: 60%;">
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">
                <i class="fas fa-phone" style="margin-right: 5px; font-size: 20px;"></i>
                <label for="swal-number" style="font-size: 14px; margin-right: 10px; width: 25%;">N√∫mero</label>
                <input id="swal-number" class="swal2-input" value="${number}" style="flex-grow: 1; font-size: 14px; padding: 8px; width: 60%;">
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">
                <i class="fab fa-instagram" style="margin-right: 5px; font-size: 20px;"></i>
                <label for="swal-instagram" style="font-size: 14px; margin-right: 10px; width: 25%;">Instagram</label>
                <input id="swal-instagram" class="swal2-input" value="${instagram}" style="flex-grow: 1; font-size: 14px; padding: 8px; width: 60%;">
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">
                <i class="fas fa-envelope" style="margin-right: 5px; font-size: 20px;"></i>
                <label for="swal-email" style="font-size: 14px; margin-right: 10px; width: 25%;">E-mail</label>
                <input id="swal-email" type="email" class="swal2-input" value="${email}" style="flex-grow: 1; font-size: 14px; padding: 8px; width: 60%;">
            </div>
        `,
        width: '100%',  // Ajustando a largura para 100% da tela
        padding: '20px',
        showCancelButton: true,
        confirmButtonText: 'Salvar',
        preConfirm: () => {
            const updatedData = {
                id,
                name: document.getElementById('swal-name').value,
                age: document.getElementById('swal-age').value,
                number: document.getElementById('swal-number').value,
                instagram: document.getElementById('swal-instagram').value,
                email: document.getElementById('swal-email').value,
                action: "update"
            };

            return fetch(API_URL, {
                method: 'POST',
                body: new URLSearchParams(updatedData)
            });
        },
        customClass: {
            popup: 'swal2-popup-custom',  // Customiza√ß√£o extra, se necess√°rio
        },
        didOpen: () => {
            const popup = document.querySelector('.swal2-popup');
            // Impede rolagem horizontal
            popup.style.overflowX = 'hidden';
            popup.style.whiteSpace = 'normal';  // Impede quebras de linha inadequadas
        },
        onBeforeOpen: () => {
            const popup = document.querySelector('.swal2-popup');
            // Impede qualquer rolagem horizontal
            popup.style.overflowX = 'hidden';
            popup.style.whiteSpace = 'normal';
        }
    }).then(() => loadUsers());
}

        function deleteUser(id) {
            Swal.fire({
                title: 'Tem certeza?',
                text: 'Voc√™ n√£o poder√° reverter isso!',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Sim, excluir',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.isConfirmed) {
                    fetch(API_URL, {
                        method: 'POST',
                        body: new URLSearchParams({ id, action: "delete" })
                    })
                    .then(() => {
                        Swal.fire('Usu√°rio exclu√≠do!', '', 'success');
                        loadUsers();
                    })
                    .catch(() => Swal.fire('Erro ao excluir o usu√°rio.', '', 'error'));
                }
            });
        }

        
    </script>
    
<!-- Rodap√© -->
<footer>
    <p>&copy; NEEXT LTDA.</p>
</footer>

</body>
</html>
