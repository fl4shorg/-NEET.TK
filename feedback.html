
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="O que t√° massa? O que pode melhorar? O que voc√™ gostaria de ver por aqui?" />
    <title> Fa√ßa seu Feedbacküó£Ô∏è</title>
    <link rel="icon" href="https://i.imgur.com/nTqoKxv.png" type="image/png">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    @keyframes form-appear {
      0% {
        opacity: 0;
        transform: translateY(20px) scale(0.96);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    @keyframes slide-up {
      0% {
        opacity: 0;
        transform: translateY(10px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .form-container {
      max-width: 28rem;
      width: 100%;
      margin: 0 auto;
      padding: 2rem 1.5rem;
      border-radius: 1rem;
      backdrop-filter: blur(10px);
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      animation: form-appear 0.8s cubic-bezier(0.22, 1, 0.36, 1);
    }
    
    .staggered-animation > *:nth-child(1) {
      animation: slide-up 0.5s ease forwards 0.1s;
      opacity: 0;
    }
    
    .staggered-animation > *:nth-child(2) {
      animation: slide-up 0.5s ease forwards 0.2s;
      opacity: 0;
    }
    
    .staggered-animation > *:nth-child(3) {
      animation: slide-up 0.5s ease forwards 0.3s;
      opacity: 0;
    }
    
    .staggered-animation > *:nth-child(4) {
      animation: slide-up 0.5s ease forwards 0.4s;
      opacity: 0;
    }
    
    .staggered-animation > *:nth-child(5) {
      animation: slide-up 0.5s ease forwards 0.5s;
      opacity: 0;
    }
    
    .input-focus-effect:focus {
      outline: none;
      box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
      transition: all 0.3s;
    }
    
    .button-hover {
      transition: all 0.3s;
    }
    
    .button-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    
    /* Toast notifications */
    .toast-container {
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 9999;
    }
    
    .toast {
      padding: 1rem;
      border-radius: 0.5rem;
      margin-bottom: 0.5rem;
      color: white;
      animation: slide-up 0.3s ease forwards;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .toast-success {
      background-color: #10B981;
    }
    
    .toast-error {
      background-color: #EF4444;
    }
  </style>
</head>
<body class="min-h-screen w-full flex flex-col items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4 py-12">
  <div class="w-full max-w-md">
    <div class="form-container staggered-animation">
      <div class="text-center mb-8">
        <div class="flex items-center justify-center mb-3">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600 mr-2">
            <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/>
            <path d="M5 3v4"/>
            <path d="M19 17v4"/>
            <path d="M3 5h4"/>
            <path d="M17 19h4"/>
          </svg>
          <h1 class="text-2xl font-bold tracking-tight">Envie seu Feedback</h1>
        </div>
        <p class="text-sm text-gray-600 mt-2">
          Preencha todos os campos corretamente para enviar suas sugest√µes
        </p>
      </div>
      
      <form id="feedbackForm" class="space-y-6">
        <div class="space-y-4">
          <div class="space-y-4">
            <div class="relative">
              <div class="absolute left-3 top-3 text-gray-600">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/>
                  <circle cx="12" cy="7" r="4"/>
                </svg>
              </div>
              <input
                type="text"
                id="nome"
                placeholder="Nome"
                class="w-full h-12 pl-10 pr-4 rounded-xl bg-white/70 border border-gray-200 focus:outline-none input-focus-effect"
              />
            </div>
            
            <div class="relative">
              <div class="absolute left-3 top-3 text-gray-600">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect width="20" height="16" x="2" y="4" rx="2"/>
                  <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
                </svg>
              </div>
              <input
                type="email"
                id="email"
                placeholder="Email para contato"
                class="w-full h-12 pl-10 pr-4 rounded-xl bg-white/70 border border-gray-200 focus:outline-none input-focus-effect"
              />
            </div>
            
            <div class="space-y-2">
              <label class="text-sm font-medium">Adicione uma imagem de perfil</label>
              <div 
                id="fileUploadContainer"
                class="relative w-full h-40 rounded-xl flex flex-col items-center justify-center p-4 transition-all duration-300 cursor-pointer bg-gray-100 border border-gray-200 hover:bg-gray-100/70 hover:border-blue-500/20"
                onclick="document.getElementById('foto').click()"
              >
                <input
                  type="file"
                  id="foto"
                  accept="image/*"
                  style="width: 0.1px; height: 0.1px; opacity: 0; overflow: hidden; position: absolute; z-index: -1;"
                />
                
                <div id="previewContainer" class="hidden relative w-full h-full flex items-center justify-center">
                  <img 
                    id="preview" 
                    src="" 
                    alt="Preview" 
                    class="max-h-full max-w-full h-auto w-auto object-contain rounded-lg shadow-sm" 
                  />
                  <button
                    type="button"
                    id="clearFile"
                    class="absolute top-0 right-0 p-1 rounded-full bg-white/90 shadow-sm hover:bg-white transition-colors duration-200"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600">
                      <path d="M18 6 6 18"/>
                      <path d="m6 6 12 12"/>
                    </svg>
                  </button>
                </div>
                
                <div id="uploadPrompt" class="flex flex-col items-center justify-center gap-2 text-center">
                  <div class="w-12 h-12 rounded-full flex items-center justify-center mb-2 bg-gray-200">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-500/60 group-hover:text-blue-500 transition-colors duration-200">
                      <path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/>
                      <circle cx="12" cy="13" r="3"/>
                    </svg>
                  </div>
                  <span class="text-sm font-medium">
                    Clique ou arraste para enviar foto
                  </span>
                  <span class="text-xs text-gray-500">
                    PNG, JPG ou GIF at√© 10MB
                  </span>
                </div>
              </div>
            </div>
            
            <div class="relative">
              <div class="absolute left-3 top-3 text-gray-600">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
              </div>
              <textarea
                id="feedback"
                placeholder="Descreva sua sugest√£o de melhoria"
                rows="4"
                class="w-full pl-10 pr-4 py-3 rounded-xl bg-white/70 border border-gray-200 focus:outline-none input-focus-effect"
              ></textarea>
            </div>
          </div>
        </div>
        
        <button
          type="submit"
          id="submitButton"
          class="w-full h-12 rounded-xl flex items-center justify-center gap-2 font-medium text-white transition-all duration-300 bg-blue-600 button-hover"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m22 2-7 20-4-9-9-4Z"/>
            <path d="M22 2 11 13"/>
          </svg>
          <span>Enviar feedback</span>
        </button>
      </form>
    </div>
    
    <div class="text-center mt-6 text-xs text-gray-500 opacity-70">
      ¬© 2019 | NEEXT LTDA
    </div>
  </div>

  <div id="toastContainer" class="toast-container"></div>

  <script>
    // Constants
    const API_IMGBB = "3d9fa0bdf06acddf7b9b0e0122b2dc9d";
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwH2LvroJKkfGqbUlH2XPK0WUGd1rIYPHqTYFICZQaYnOAmRlRz6JxE4WuB-tvOLz-J/exec";
    
    // Elements
    const form = document.getElementById('feedbackForm');
    const fileInput = document.getElementById('foto');
    const fileUploadContainer = document.getElementById('fileUploadContainer');
    const previewContainer = document.getElementById('previewContainer');
    const uploadPrompt = document.getElementById('uploadPrompt');
    const preview = document.getElementById('preview');
    const clearFileButton = document.getElementById('clearFile');
    const submitButton = document.getElementById('submitButton');
    
    // Toast notifications
    function showToast(message, type = 'success') {
      const toast = document.createElement('div');
      toast.className = `toast toast-${type}`;
      
      const icon = document.createElement('span');
      if (type === 'success') {
        icon.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>`;
      } else {
        icon.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>`;
      }
      
      const text = document.createElement('span');
      text.textContent = message;
      
      toast.appendChild(icon);
      toast.appendChild(text);
      
      const toastContainer = document.getElementById('toastContainer');
      toastContainer.appendChild(toast);
      
      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateY(-10px)';
        toast.style.transition = 'all 0.3s ease';
        
        setTimeout(() => {
          toastContainer.removeChild(toast);
        }, 300);
      }, 3000);
    }
    
    // File handling
    fileInput.addEventListener('change', handleFileChange);
    clearFileButton.addEventListener('click', clearFile);
    
    function handleFileChange(e) {
      const file = e.target.files[0];
      if (file) {
        showPreview(file);
      }
    }
    
    function showPreview(file) {
      const reader = new FileReader();
      reader.onloadend = () => {
        preview.src = reader.result;
        previewContainer.classList.remove('hidden');
        uploadPrompt.classList.add('hidden');
      };
      reader.readAsDataURL(file);
    }
    
    function clearFile(e) {
      e.stopPropagation();
      fileInput.value = '';
      preview.src = '';
      previewContainer.classList.add('hidden');
      uploadPrompt.classList.remove('hidden');
    }
    
    // Form handling
    form.addEventListener('submit', handleSubmit);
    
    function validateForm() {
      const nome = document.getElementById('nome').value;
      const email = document.getElementById('email').value;
      const foto = document.getElementById('foto').files[0];
      const feedback = document.getElementById('feedback').value;
      
      if (!nome.trim()) {
        showToast("Por favor, informe o nome completo", "error");
        return false;
      }
      
      if (!email.trim()) {
        showToast("Por favor, informe um email", "error");
        return false;
      }
      
      if (!email.includes('@') || !email.includes('.')) {
        showToast("Por favor, informe um email v√°lido", "error");
        return false;
      }
      
      if (!foto) {
        showToast("Por favor, selecione uma foto", "error");
        return false;
      }
      
      if (!feedback.trim()) {
        showToast("Por favor, preencha o campo de feedback", "error");
        return false;
      }
      
      return true;
    }
    
    async function handleSubmit(e) {
      e.preventDefault();
      
      if (!validateForm()) return;
      
      // Change button state to loading
      submitButton.disabled = true;
      submitButton.innerHTML = `
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="animate-spin">
          <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
        </svg>
        <span>Enviando...</span>
      `;
      
      const nome = document.getElementById('nome').value;
      const email = document.getElementById('email').value;
      const foto = document.getElementById('foto').files[0];
      const feedback = document.getElementById('feedback').value;
      
      try {
        // Upload image to ImgBB
        const formData = new FormData();
        formData.append("image", foto);
        
        const response = await fetch(`https://api.imgbb.com/1/upload?key=${API_IMGBB}`, {
          method: "POST",
          body: formData
        });
        
        if (!response.ok) {
          throw new Error("Falha ao fazer upload da imagem");
        }
        
        const data = await response.json();
        const fotoUrl = data.data.url;
        
        // Submit data to Google Apps Script
        const dados = { 
          nome: nome, 
          email: email, 
          foto: fotoUrl, 
          feedback: feedback
        };
        
        await fetch(SCRIPT_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(dados),
          mode: 'no-cors'
        });
        
        // Show success message
        showToast("Feedback enviado com sucesso! Agradecemos sua contribui√ß√£o.");
        
        // Change button to success state
        submitButton.classList.remove('bg-blue-600');
        submitButton.classList.add('bg-green-500');
        submitButton.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
          <span>Enviado com sucesso!</span>
        `;
        
        // Reset form after 3 seconds
        setTimeout(() => {
          form.reset();
          clearFile({ stopPropagation: () => {} });
          submitButton.disabled = false;
          submitButton.classList.remove('bg-green-500');
          submitButton.classList.add('bg-blue-600');
          submitButton.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="m22 2-7 20-4-9-9-4Z"/>
              <path d="M22 2 11 13"/>
            </svg>
            <span>Enviar feedback</span>
          `;
        }, 3000);
        
      } catch (error) {
        console.error("Erro ao enviar:", error);
        showToast("Ocorreu um erro ao enviar. Por favor, tente novamente.", "error");
        
        // Reset button state
        submitButton.disabled = false;
        submitButton.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m22 2-7 20-4-9-9-4Z"/>
            <path d="M22 2 11 13"/>
          </svg>
          <span>Enviar feedback</span>
        `;
      }
    }
    
    // Handle drag and drop for file upload
    ['dragover', 'dragenter'].forEach(eventName => {
      fileUploadContainer.addEventListener(eventName, (e) => {
        e.preventDefault();
        fileUploadContainer.classList.add('border-blue-500/50', 'bg-blue-50/30');
      }, false);
    });
    
    ['dragleave', 'dragend', 'drop'].forEach(eventName => {
      fileUploadContainer.addEventListener(eventName, (e) => {
        e.preventDefault();
        fileUploadContainer.classList.remove('border-blue-500/50', 'bg-blue-50/30');
      }, false);
    });
    
    fileUploadContainer.addEventListener('drop', (e) => {
      e.preventDefault();
      const file = e.dataTransfer.files[0];
      if (file && file.type.startsWith('image/')) {
        fileInput.files = e.dataTransfer.files;
        showPreview(file);
      }
    }, false);
    
    // Update copyright year
    document.querySelector('.text-center.mt-6').innerHTML = `¬© ${new Date().getFullYear()} | Feedback seguro e confidencial`;
  </script>
</body>
</html>
